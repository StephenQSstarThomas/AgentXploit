# Exploiter Agent Docker Configuration

# ============================================================================
# AgentDojo Configuration (ACTIVE)
# ============================================================================
docker:
  name: "agentdojo-workspace"
  image: "agentxploit-agentdojo"
  command: "tail -f /dev/null"
  detach: true
  auto_remove: false
  remove: true
  environment:
    MODEL: "gpt-4.1-2025-04-14"
    OPENAI_API_KEY: "sk-Eav7rsFEDl480mnJwGL-4g"
    OPENAI_BASE_URL: "https://litellm-991596698159.us-west1.run.app/v1"

execution:
  # Command to get initial report (Phase 1)
  command: "bash get_report.sh -s workspace -ut user_task_5 -it injection_task_1"
  # Command to run agent with injection (Phase 2-4, used by run_agent tool)
  run_command: "bash run_agent.sh -s workspace -ut user_task_5 -it injection_task_1"
  # Path to report file in container (Phase 1 - initial report)
  trajectory_path: /work/report.txt
  # Path to trace file in container (Phase 2-4 - execution with injection)
  trace_path: /work/trace.json
  # Local destination for reports and trajectories
  local_dest: ./reports

# Agent type for success checking
agent_type: agentdojo

essential_files:
  files: []
  container_dest: "/work"

# ============================================================================
# OpenHands Configuration (COMMENTED OUT)
# ============================================================================
# docker:
#   name: "openhands-app"
#   image: "docker.all-hands.dev/all-hands-ai/openhands:0.49"
#   command: null  # OpenHands自启动，不需要覆盖命令
#   detach: true
#   auto_remove: false
#   remove: true
#   environment:
#     SANDBOX_RUNTIME_CONTAINER_IMAGE: "docker.all-hands.dev/all-hands-ai/runtime:0.49-nikolaik"
#     LOG_ALL_EVENTS: "true"
#   volumes:
#     /run/user/2050/docker.sock:
#       bind: /var/run/docker.sock
#       mode: rw
#     /home/shiqiu/OpenHands/shared:
#       bind: /shared
#       mode: rw
#   extra_hosts:
#     - "host.docker.internal:169.229.219.180"

# # Execution configuration
# execution:
#   # Command to run inside container
#   command: "cd /workspace && chmod +x test_run.py && python3 test_run.py --max-iterations 10"
#   # Same as command for OpenHands (no separate injection command needed)
#   run_command: "cd /workspace && chmod +x test_run.py && python3 test_run.py --max-iterations 10"
#   # Directory containing trajectory JSON files
#   trajectory_path: "/shared/trajectories"
#   # Local destination for reports
#   local_dest: "./reports/openhands"

# # Agent type for success checking
# agent_type: openhands

# # Essential files to copy to container before execution
# essential_files:
#   files:
#     - local: "/home/shiqiu/OpenHands/test_run.py"
#       container: "/workspace/test_run.py"
#     - local: "/home/shiqiu/OpenHands/config.toml"
#       container: "/workspace/config.toml"
#     - local: "/home/shiqiu/OpenHands/test.json"
#       container: "/workspace/test.json"
#   container_dest: "/workspace"

